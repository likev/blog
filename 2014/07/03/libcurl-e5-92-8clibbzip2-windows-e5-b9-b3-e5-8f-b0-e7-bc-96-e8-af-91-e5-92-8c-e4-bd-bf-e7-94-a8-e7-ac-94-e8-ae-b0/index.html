<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> libcurl和libbzip2 windows平台编译和使用笔记 · HanDong's Blog</title><meta name="description" content="libcurl和libbzip2 windows平台编译和使用笔记 - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">libcurl和libbzip2 windows平台编译和使用笔记</h1><div class="post-time">Jul 3, 2014</div><div class="post-content"><h2 id="版本及平台"><a href="#版本及平台" class="headerlink" title="版本及平台"></a>版本及平台</h2><pre>
win7 
visual C++ 2010 express(学习版) 
curl-7.37.0 
bzip2 1.0.6
</pre>

<h2 id="libcurl-编译"><a href="#libcurl-编译" class="headerlink" title="libcurl 编译"></a>libcurl 编译</h2><pre lang="ini">
打开vc命令行工具 进入源代码目录下的winbuild目录 执行 nmake /f Makefile.vc mode=<static or="" dll=""> <options>

<options>可以是下述的一个或多个选项:
   VC=<6,7,8,9,10,11,12>        - VC versions
   WITH_DEVEL=<path></path>            - Paths for the development files (SSL, zlib, etc.)
                                  Defaults to sibbling directory deps: ../deps
                                  Libraries can be fetched at http://pecl2.php.net/downloads/php-windows-builds/
                                  Uncompress them into the deps folder.
   WITH_SSL=<dll or="" static="">     - Enable OpenSSL support, DLL or static
   WITH_ZLIB=<dll or="" static="">    - Enable zlib support, DLL or static
   WITH_SSH2=<dll or="" static="">    - Enable libSSH2 support, DLL or static
   ENABLE_IDN=<yes or="" no="">       - Enable use of Windows IDN APIs, defaults to yes
                                  Requires Windows Vista or later, or installation from:
                                  http://www.microsoft.com/downloads/details.aspx?FamilyID=AD6158D7-DDBA-416A-9109-07607425A815
   ENABLE_IPV6=<yes or="" no="">      - Enable IPv6, defaults to yes
   ENABLE_SSPI=<yes or="" no="">      - Enable SSPI support, defaults to yes
   ENABLE_SPNEGO=<yes or="" no="">    - Enable Simple and Protected GSSAPI Negotiation Mechanism, defaults to yes
   ENABLE_WINSSL=<yes or="" no="">    - Enable native Windows SSL support, defaults to yes
   GEN_PDB=<yes or="" no="">          - Generate Program Database (debug symbols for release build)
   DEBUG=<yes or="" no="">            - Debug builds
   MACHINE=<x86 or="" x64="">         - Target architecture (default x64 on AMD64, x86 on others)
</x86></yes></yes></yes></yes></yes></yes></yes></dll></dll></dll></6,7,8,9,10,11,12></options></options></static></pre>
如果想修改 Runtime library 选项，可打开文件MakefileBuild.vc 修改下述配置
<pre># Runtime library configuration
# !IF "$(RTLIBCFG)"=="static"
!IF "$(MODE)"=="static"
RTLIB = /MT
RTLIB_DEBUG = /MTd
!ELSE
RTLIB = /MD
RTLIB_DEBUG  = /MDd
!ENDIF</pre>

<h2 id="libcurl-使用"><a href="#libcurl-使用" class="headerlink" title="libcurl 使用"></a>libcurl 使用</h2><p>当使用静态库时 在程序代码开始处添加下述定义</p>
<p>#define CURL_STATICLIB</p>
<p>#include “curl/curl.h”</p>
<h2 id="libbzip2-编译"><a href="#libbzip2-编译" class="headerlink" title="libbzip2 编译"></a>libbzip2 编译</h2><p>打开vc命令行工具 进入源代码目录 执行 nmake -f makefile.msc<br>makefile.msc 文件包含编译选项 如 -DWIN32 -MD -Ox -D_FILE_OFFSET_BITS=64 -nologo 可根据需要修改</p>
<h2 id="libbzip2-使用"><a href="#libbzip2-使用" class="headerlink" title="libbzip2 使用"></a>libbzip2 使用</h2><p>仅需包含 bzlib.h 和 libbz2.lib</p>
</div></article></div></section><footer><div class="paginator"><a href="/2014/07/03/c-e4-bd-bf-e7-94-a8libcurl-e4-b8-8a-e4-bc-a0-e6-96-87-e4-bb-b6-e4-bb-a3-e7-a0-81-e7-a4-ba-e4-be-8b/" class="prev">上一篇</a><a href="/2013/01/16/jquery-1-9-e7-89-88-jquery-2-0-beta-e7-89-88-jquery-migrate-e6-8f-92-e4-bb-b61-0-e5-8f-91-e5-b8-83/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://blog.tianqi.at">John Doe</a>, unless otherwise noted.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>