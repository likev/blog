<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> windows中的多线程处理 · HanDong's Blog</title><meta name="description" content="windows中的多线程处理 - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/html5-audio-player/" target="_self" class="nav-list-link">MUSIC</a></li><li class="nav-list-item"><a href="https://twitter.com/likev" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="https://github.com/likev" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">windows中的多线程处理</h1><div class="post-time">Mar 26, 2012</div><div class="post-content"><h3 id="（一）建立新线程的函数"><a href="#（一）建立新线程的函数" class="headerlink" title="（一）建立新线程的函数"></a>（一）建立新线程的函数</h3><p>1.Win32 API函数 <a href="http://msdn.microsoft.com/en-us/library/ms682453%28v=vs.85%29.aspx" target="_blank" rel="external">CreateThread</a></p>
<pre lang="cpp">HANDLE WINAPI CreateThread(
  __in_opt   LPSECURITY_ATTRIBUTES lpThreadAttributes,
  __in       SIZE_T dwStackSize,
  __in       LPTHREAD_START_ROUTINE lpStartAddress,
  __in_opt   LPVOID lpParameter,
  __in       DWORD dwCreationFlags,
  __out_opt  LPDWORD lpThreadId
);</pre>

<p>2.也可以用C运行库的函数 <a href="http://msdn.microsoft.com/en-us/library/kdzttdcb%28v=vs.80%29.aspx" target="_blank" rel="external">_beginthread</a> 来创建新线程</p>
<pre lang="cpp">uintptr_t _beginthread( 
   void( *start_address )( void * ),
   unsigned stack_size,
   void *arglist 
);</pre>

<h3 id="（二）线程间通讯方法："><a href="#（二）线程间通讯方法：" class="headerlink" title="（二）线程间通讯方法："></a>（二）线程间通讯方法：</h3><p>1.消息通讯<br>可以在线程中用<a href="http://msdn.microsoft.com/en-us/library/ms644950%28VS.85%29.aspx" target="_blank" rel="external">SendMessage</a>发送自定义消息到指定窗口</p>
<pre lang="cpp">LRESULT WINAPI SendMessage(
  __in  HWND hWnd,
  __in  UINT Msg,
  __in  WPARAM wParam,
  __in  LPARAM lParam
);</pre>

<p>2.创建线程时可以传递一个结构体的指针<br>3.利用全局变量来通讯</p>
</div></article></div></section><footer><div class="paginator"><a href="/2012/04/01/e7-90-86-e8-a7-a3-e5-92-8c-e5-ba-94-e7-94-a8canvas-e5-8f-98-e6-8d-a2/" class="prev">上一篇</a><a href="/2012/03/26/e5-af-b9window-e7-a8-8b-e5-ba-8f-e6-b6-88-e6-81-af-e5-be-aa-e7-8e-af-e7-9a-84-e7-90-86-e8-a7-a3/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://blog.tianqi.at">John Doe</a>, unless otherwise noted.</p></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>