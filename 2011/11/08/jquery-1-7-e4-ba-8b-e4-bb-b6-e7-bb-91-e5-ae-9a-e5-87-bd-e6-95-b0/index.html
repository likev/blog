<!DOCTYPE html><html lang="zh-cn,en,default"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> jQuery 1.7 事件绑定函数 · HanDong's Blog</title><meta name="description" content="jQuery 1.7 事件绑定函数 - HanDong"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/html5-audio-player/" target="_self" class="nav-list-link">MUSIC</a></li><li class="nav-list-item"><a href="https://twitter.com/likev" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="https://github.com/likev" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">jQuery 1.7 事件绑定函数</h1><div class="post-time">2011年11月8日</div><div class="post-content"><p>jQuery 1.7 前几天发布了，新增了两个事件处理函数 <code>.on()</code> 和 <code>.off()</code> 分别用来绑定和解除事件。这两个函数可以<strong>取代</strong>之前版本中所有的事件处理函数。<br>现在事件绑定和解除更简单了，下面是新旧版本事件处理代码的对比：</p>
<pre lang="javascript">
$('a').bind('click', myHandler);
$('a').on('click', myHandler);

$('form').bind('submit', { val: 42 }, fn);
$('form').on('submit', { val: 42 }, fn);

$(window).unbind('scroll.myPlugin');
$(window).off('scroll.myPlugin');

$('.comment').delegate('a.add', 'click', addNew);
$('.comment').on('click', 'a.add', addNew);

$('.dialog').undelegate('a', 'click.myDlg');
$('.dialog').off('click.myDlg', 'a');

$('a').live('click', fn);
$(document).on('click', 'a', fn);

$('a').die('click');
$(document).off('click', 'a');
</pre>

<p>另外想说一下jQuery中的<strong>事件对象(<a href="http://api.jquery.com/category/events/event-object/" target="_blank" rel="external">Event Object</a>)</strong>：</p>
<p>jQuery的事件系统规范化了事件对象(根据W3C标准)。jQuery保证事件对象被传递给事件处理程序。大部分的属性从原来的事件中复制和规范化给新的事件对象。</p>
<p>jQuery保证下列属性是事件对象的成员，尽管它们中的一些值可能是undefined(依赖于具体的事件):</p>
<pre lang="javascript">
altKey, attrChange, attrName, bubbles, button, cancelable, 
charCode, clientX, clientY, ctrlKey, currentTarget, data, detail, 
eventPhase, fromElement, handler, keyCode, layerX, layerY,
 metaKey, newValue, offsetX, offsetY, originalTarget,
 pageX, pageY, prevValue, relatedNode, relatedTarget, 
screenX, screenY, shiftKey, srcElement, target, 
toElement, view, wheelDelta, which
</pre>

<p>为了跨浏览器兼容，jQuery 对下列属性进行了规范化:</p>
<pre lang="javascript">
    target
    relatedTarget
    pageX
    pageY
    which
    metaKey
</pre>

<p><strong>特别注意</strong>，并不是所有原始事件的属性都被复制给jQuery的事件对象。这时可以用 event.originalEvent 来获取原始事件对象。比如在HTML5文件拖放操作时需要用到drop事件的dataTransfer属性，可以像下面这样做：</p>
<pre lang="javascript">
$('body').on('drop',function(e){
    var file = e.originalEvent.dataTransfer.files[0];//获取一组拖放文件中的第一个文件

    reader = new FileReader();//创建FileReader对象来读取文件内容
    reader.onload = function(e){//读取完成时将内容显示于body中
        $('body').text(e.target.result);
    };
    reader.readAsText(file,'utf-8');//开始读取文件

    //相当于同时调用e.stopPropagation() 和 e.preventDefault()
    return false;//阻止事件冒泡和浏览器的默认行为
});
</pre></div></article></div></section><footer><div class="paginator"><a href="/2011/11/09/c-e8-8e-b7-e5-8f-96-e6-96-87-e4-bb-b6-e4-bf-a1-e6-81-af/" class="prev">上一篇</a><a href="/2011/11/07/google-maps-e6-98-be-e7-a4-ba-e5-9c-b0-e9-9d-a2-e5-a4-a9-e6-b0-94-e5-ae-9e-e5-86-b5/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://blog.tianqi.at">HanDong</a>, unless otherwise noted.</p></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>