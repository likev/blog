<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> jQuery获取window、document、dom元素的高度和宽度函数分析 · HanDong's Blog</title><meta name="description" content="jQuery获取window、document、dom元素的高度和宽度函数分析 - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/html5-audio-player/" target="_self" class="nav-list-link">MUSIC</a></li><li class="nav-list-item"><a href="https://twitter.com/likev" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="https://github.com/likev" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">jQuery获取window、document、dom元素的高度和宽度函数分析</h1><div class="post-time">May 6, 2011</div><div class="post-content"><p>以下为获取高度或宽度函数的jQuery源代码</p>
<p><pre lang="javascript"><br>// 创建jQuery.height(size)  jQuery.width(size)<br>//调用each方法创建两个相似的函数<br>jQuery.each([ “Height”, “Width” ], function( i, name ) {</pre></p>
<pre><code>var type = name.toLowerCase();

jQuery.fn[ type ] = function( size ) {

    var elem = this[0];
    if ( !elem ) {
        return size == null ? null : this;
    }

    if ( jQuery.isFunction( size ) ) {
        return this.each(function( i ) {
            var self = jQuery( this );
            self[ type ]( size.call( this, i, self[ type ]() ) );
        });
    }

    // 获取window对象的高度或宽度 ($(window).width() ) 实际上是当前可见区域的高度或宽度
    if ( jQuery.isWindow( elem ) ) {
        // Everyone else use document.documentElement or document.body depending on Quirks vs Standards mode
        // 3rd condition allows Nokia support, as it supports the docElem prop but not CSS1Compat
        // 以上英文的意思是依赖于Quirks 或 Standards 文档模式来使用 
        // document.documentElement (实际上就是&lt;html/&gt;元素) 或 document.body
        var docElemProp = elem.document.documentElement[ &quot;client&quot; + name ];
        return elem.document.compatMode === &quot;CSS1Compat&quot; &amp;&amp; docElemProp ||
            elem.document.body[ &quot;client&quot; + name ] || docElemProp;

    // 获取整个文档对象(document)的宽度或高度
    } else if ( elem.nodeType === 9 ) {
        // Either scroll[Width/Height] or offset[Width/Height], whichever is greater
        return Math.max(
            elem.documentElement[&quot;client&quot; + name],
            elem.body[&quot;scroll&quot; + name], elem.documentElement[&quot;scroll&quot; + name],
            elem.body[&quot;offset&quot; + name], elem.documentElement[&quot;offset&quot; + name]
        );

    // 获取DOM元素的高度或宽度
    } else if ( size === undefined ) {
        var orig = jQuery.css( elem, type ),
            ret = parseFloat( orig );

        return jQuery.isNaN( ret ) ? orig : ret;

    // 设置DOM元素的高度或宽度 (当没有单位时默认为像素值)
    } else {
        return this.css( type, typeof size === &quot;string&quot; ? size : size + &quot;px&quot; );
    }
};
</code></pre><p>});<br><br>jQuery(window).height()代表了当前可见区域的大小，而jQuery(document).height()则代表了整个文档的高度，可视具体情况使用<br>注意当浏览器窗口大小改变时(如最大化或拉大窗口后) jQuery(window).height() 随之改变，但是jQuery(document).height()是不变的。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2011/08/08/e5-90-af-e7-94-a8-e6-96-b0-e6-b5-aa-e6-9c-8d-e5-8a-a1-e5-99-a8-e4-b8-8a-e7-9a-84-e5-8d-9a-e5-ae-a2/" class="prev">上一篇</a><a href="/2011/04/12/e5-88-a4-e6-96-ad-e7-82-b9point-e6-98-af-e5-90-a6-e5-9c-a8-e5-8c-ba-e5-9f-9frgn-e5-86-85-e9-83-a8-1-e5-86-85-e9-83-a8-1-e8-be-b9-e7-95-8c-0-e5-a4-96-e9-83-a8/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://blog.tianqi.at">John Doe</a>, unless otherwise noted.</p></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>