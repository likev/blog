<!DOCTYPE html><html lang="zh-cn,en,default"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 在XP及Ubuntu上快速安装及配置LAMP(Linux+Apache+Mysql+Php/Perl/Python)环境 · HanDong's Blog</title><meta name="description" content="在XP及Ubuntu上快速安装及配置LAMP(Linux+Apache+Mysql+Php/Perl/Python)环境 - HanDong"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/html5-audio-player/" target="_self" class="nav-list-link">MUSIC</a></li><li class="nav-list-item"><a href="https://twitter.com/likev" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="https://github.com/likev" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">在XP及Ubuntu上快速安装及配置LAMP(Linux+Apache+Mysql+Php/Perl/Python)环境</h1><div class="post-time">2011年8月10日</div><div class="post-content"><h2 id="Ubuntu-快速安装LAMP环境及配置方法："><a href="#Ubuntu-快速安装LAMP环境及配置方法：" class="headerlink" title="Ubuntu 快速安装LAMP环境及配置方法："></a>Ubuntu 快速安装LAMP环境及配置方法：</h2><h4 id="一-安装LAMP环境"><a href="#一-安装LAMP环境" class="headerlink" title="一 安装LAMP环境"></a>一 安装LAMP环境</h4><p>在终端输入以下命令(是的，你没看错，只用一条命令即可)</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install apache2 mysql-server mysql-client php5 php5-gd php5-mysql</span><br></pre></td></tr></table></figure>
<p>安装过程中会要求你设置MySQL的帐户root密码，暂时可以直接回车，不设置密码</p>
<h4 id="二-配置LAMP环境"><a href="#二-配置LAMP环境" class="headerlink" title="二 配置LAMP环境"></a>二 配置LAMP环境</h4><p>Apache2默认安装在/etc/apache2目录下<br>打开用户配置文件：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/apache2/httpd.conf</span><br></pre></td></tr></table></figure>
<p>添加下面的一行来启用php文件类型支持：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">AddType</span> application/x-httpd-php .php .php5</span><br></pre></td></tr></table></figure>
<p>至此LAMP已可以正常运行 网站目录默认在 /var/www</p>
<h4 id="三-其他可选配置"><a href="#三-其他可选配置" class="headerlink" title="三 其他可选配置"></a>三 其他可选配置</h4><pre><code>1. apache 的配置文件路径 /etc/apache2/httpd.conf
2. php.ini 路径 /etc/php5/apache2/php.ini
3. mysql配置文件 路径 /etc/mysql/my.cnf
4. phpmyadmin配置文件路径 /etc/phpmyadmin/apache.conf
5. 网站根目录配置文件路径 /etc/apache2/sites-enabled
</code></pre><h2 id="XP-快速安装LAMP环境及配置方法："><a href="#XP-快速安装LAMP环境及配置方法：" class="headerlink" title="XP 快速安装LAMP环境及配置方法："></a>XP 快速安装LAMP环境及配置方法：</h2><h4 id="一-安装及配置Apache"><a href="#一-安装及配置Apache" class="headerlink" title="一 安装及配置Apache"></a>一 安装及配置Apache</h4><ol>
<li><p>打开网页 选择合适的版本下载<br><a href="http://httpd.apache.org/download.cgi" target="_blank" rel="external">http://httpd.apache.org/download.cgi</a></p>
</li>
<li><p>xp下双击安装包，直接安装<br>ubuntu下安装说明见 <a href="http://httpd.apache.org/docs/2.2/install.html" target="_blank" rel="external">apache.org/docs/2.2/install.html</a></p>
</li>
<li><p>打开conf/httpd.conf  进行配置</p>
 <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置网站所在的文件夹</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">DocumentRoot</span></span> <span class="string">"D:/webdocs"</span></span><br></pre></td></tr></table></figure>
 <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置网站文件夹的属性</span></span><br><span class="line"><span class="section">&lt;Directory "D:/webdocs"&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">#当文件不存在时不要列出目录中的文件列表</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">Options</span></span> -Indexes FollowSymLinks</span><br><span class="line"></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># AllowOverride controls what directives may be placed in .htaccess files.</span></span><br><span class="line">    <span class="comment"># It can be "All", "None", or any combination of the keywords:</span></span><br><span class="line">    <span class="comment">#   Options FileInfo AuthConfig Limit</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="attribute">AllowOverride</span> None</span><br><span class="line"></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># 控制对此目录的访问权限</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">Order</span></span> allow,deny</span><br><span class="line">    <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="二-安装及配置Mysql"><a href="#二-安装及配置Mysql" class="headerlink" title="二 安装及配置Mysql"></a>二 安装及配置Mysql</h4><p>Ubuntu下安装过程见此文 <a href="http://forum.ubuntu.org.cn/viewtopic.php?t=330121" target="_blank" rel="external">ubuntu 10.04 MySQL 5.5.11 源代码编译安装</a><br>XP下可直接下载安装包</p>
<h4 id="三-安装及配置PHP"><a href="#三-安装及配置PHP" class="headerlink" title="三 安装及配置PHP"></a>三 安装及配置PHP</h4><ol>
<li><p>下载 the PHP zip binary distribution from <a href="http://windows.php.net/download/" target="_blank" rel="external">» PHP for Windows: Binaries and Sources</a>.</p>
<p> 选择 VC6 x86 Thread Safe 版本</p>
</li>
<li><p>直接解压后放在softs文件夹下即可</p>
</li>
<li><p>在安装目录中另存 php.ini-production 为 php.ini 并进行配置</p>
<p> a.设置模块目录并开启需要的模块</p>
 <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; Directory in which the loadable extensions (modules) reside.</span></span><br><span class="line"><span class="comment">; 此项设置模块所在的目录，注意如果path变量没有设置php安装目录时</span></span><br><span class="line"><span class="comment">; 此项一定要设置为绝对目录，否则Apache将无法正确加载php扩展模块</span></span><br><span class="line"><span class="attr">extension_dir</span> = <span class="string">"D:/softs/php-5.2.17/ext/"</span></span><br></pre></td></tr></table></figure>
<p> 以上设置不正确时将会出现类似下述错误信息</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PHP Warning:  PHP Startup: Unable to load dynamic library &apos;./ext/php_bz2.dll&apos; - \xd5\xd2\xb2\xbb\xb5\xbd\xd6\xb8\xb6\xa8\xb5\xc4\xc4\xa3\xbf\xe9\xa1\xa3\r\n in Unknown on line 0</span><br><span class="line">PHP Warning:  PHP Startup: Unable to load dynamic library &apos;./ext/php_curl.dll&apos; - \xd5\xd2\xb2\xbb\xb5\xbd\xd6\xb8\xb6\xa8\xb5\xc4\xc4\xa3\xbf\xe9\xa1\xa3\r\n in Unknown on line 0</span><br></pre></td></tr></table></figure>
<p>  b.设置可最大上传文件的大小和默认时区等选项</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Date]</span><br><span class="line">; Defines the default timezone used by the date functions</span><br><span class="line">date.timezone = Asia/Chongqing</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开apache 的 conf/httpd.conf  进行配置</p>
 <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 让apache自动在每次启动时加载php模块. apache2.2 版本需要加载php5apache2_2.dll</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">LoadModule</span></span> php5_module <span class="string">"D:/softs/php-5.2.17/php5apache2_2.dll"</span></span><br><span class="line"><span class="attribute">AddHandler</span> application/x-httpd-php .php</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 php.ini 文件所在路径</span></span><br><span class="line"><span class="attribute">PHPIniDir</span> <span class="string">"D:/softs/php-5.2.17"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重启计算机</p>
</li>
</ol>
<hr>
<p>今天调试网页时发现apache服务器经常自动重启，打开error.log文件后发现下述信息</p>
<p>[Sat Aug 20 19:43:25 2011] [notice] Parent: child process exited with status <strong>3221225477</strong> – Restarting</p>
<p>在网上查找一番后发现原因是php文件中包含了数据库查询语句，而apache调用了与当前版本不一致的<strong>libmysql.dll</strong> 所致。<br>由于安装的mysql 数据库是早期版本，在安装mysql后程序自动设定<strong>mysql安装目录</strong>为<strong>PATH</strong>环境变量。mysql安装目录下含有版本不一致的libmysql.dll 文件，apache调用了那个不合适的文件后产生错误。</p>
<p>而在安装php时并没有将php目录设定为PATH环境变量。</p>
<p><strong>解决办法：</strong> 删除mysql安装目录里面的libmysql.dll 文件，然后将php安装目录设置为PATH环境变量即可。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2011/08/10/e9-9b-a8-e9-87-8f-e6-8a-a5-e8-ad-a6-e7-bd-91-e9-a1-b5-e4-bf-ae-e6-94-b9/" class="prev">上一篇</a><a href="/2011/08/10/e5-b1-80-e5-9c-b0-e5-9b-9e-e6-b3-a2/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://blog.tianqitu.net">HanDong</a>, unless otherwise noted.</p></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>